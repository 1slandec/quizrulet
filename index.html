<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Модули - QuizRuLet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/419f67953a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./styles/fonts.css">
    <link rel="stylesheet" href="./styles/styles.css">
    <link rel="stylesheet" href="./styles/adaptive_styles.css">
</head>

<body>
<!-- Мобильная навигационная панель (видна только на мобильных) -->
<div class="navbar-mobile justify-content-start">
    <button class="navbar-toggler btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars"></i>
    </button>
    <a class="quizrulet-brand-mobile" href="/">
        <span class="text-success">Quiz</span><span class="text-secondary">RuLet</span>
    </a>
</div>

<div class="container-fluid p-0">
    <div class="row g-0">
        <!-- Боковое меню -->
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
            <div class="position-sticky pt-lg-3">
                <div class="sidebar-header justify-content-center align-items-center p-lg-0">
                    <!-- Кнопка-бургер для закрытия меню на мобильных -->
                    <div class="burger-btn-in d-md-none align-items-center position-absolute">
                        <button class="navbar-toggler btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                    <a class="quizrulet-brand-sidebar d-flex justify-content-center align-items-center mb-lg-3" href="/">
                        <span class="text-success">Quiz</span><span class="text-secondary">RuLet</span>
                    </a>
                    
                </div>
                
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">
                            <i class="fas fa-home me-2"></i> Мои модули
                        </a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="#">
                           <i class="fas fa-cog me-2"></i> Настройки
                        </a>
                    </li> -->
                     <li class="nav-item">
                        <a class="nav-link" href="login.html">
                           <i class="fas fa-sign-out-alt me-2"></i> Выйти
                        </a>
                    </li>
                </ul>
            </div>

            <div class="help">
                <a class="nav-link" href="./help/sozdanie_novogo_uchebnogo_modulya.htm">
                    <i class="fas fa-question me-2"></i> Помощь
                </a>
            </div>
        </nav>

        <!-- Основной контент -->
        <main class="col-md-9 col-lg-10 ms-sm-auto px-md-4 min-vh-100">
            <div class="top-bar d-flex justify-content-between align-items-center flex-wrap">
                <form class="d-flex search-form w-100 w-md-auto">
                     <input class="form-control form-control-dark me-2" type="search" placeholder="Найти модуль" aria-label="Search">
                     <button class="btn btn-search" type="submit"><i class="fas fa-search"></i></button>
                </form>
                <a class="btn btn-create d-inline-flex align-items-center w-md-auto" href="#" data-bs-toggle="modal" data-bs-target="#createModuleModal">
                    <svg class="me-2" width="20" height="20" viewBox="0 0 37 37" fill="none" xmlns="http://www.w3.org/2000/svg">
                         <path fill-rule="evenodd" clip-rule="evenodd" d="M17.3126 0.0155014C12.8859 0.372753 9.03964 2.03402 5.91293 4.93922C4.72369 6.04421 3.62192 7.37601 2.76592 8.74344C1.95749 10.0348 1.14416 11.8638 0.706135 13.3754C0.116187 15.4113 -0.114246 17.6975 0.0532306 19.8533C0.556828 26.3352 4.2326 31.9254 9.97371 34.9406C11.5595 35.7734 13.2397 36.3505 15.1455 36.7168C17.1094 37.0944 19.9051 37.0944 21.869 36.7168C24.2688 36.2556 26.4015 35.4225 28.3763 34.1751C33.1707 31.1467 36.2784 26.1951 36.9308 20.5449C37.044 19.564 37.0132 17.1116 36.8753 16.1265C36.2529 11.6817 34.1768 7.69436 30.9862 4.81595C28.0726 2.18747 24.6481 0.611458 20.7806 0.119431C20.1198 0.0353425 17.8933 -0.031406 17.3126 0.0155014ZM19.2519 9.98837C19.5501 10.1286 19.919 10.4807 20.0626 10.7621C20.2592 11.1476 20.2854 11.5512 20.2854 14.1891V16.7608L23.1054 16.7771L25.9254 16.7934L26.1885 16.9242C27.3217 17.4874 27.5389 18.9577 26.612 19.7912C26.1452 20.211 26.1412 20.2114 23.0324 20.2114H20.2911L20.2726 23.0042C20.2515 26.1898 20.2644 26.0957 19.7765 26.6297C19.3286 27.1198 18.667 27.2826 17.9671 27.0747C17.6111 26.9689 17.1657 26.5777 16.9622 26.192L16.8125 25.9081L16.7962 23.0597L16.78 20.2114H14.0061C11.3698 20.2114 11.2175 20.2059 10.9357 20.1004C10.5813 19.9678 10.2179 19.6271 10.0167 19.2388C9.89814 19.0099 9.87219 18.8825 9.86969 18.5163C9.86714 18.1389 9.89003 18.0241 10.0212 17.757C10.199 17.3948 10.5192 17.0827 10.8879 16.9122C11.1379 16.7965 11.2192 16.7929 13.9647 16.7771L16.7847 16.7608V14.05C16.7847 11.0509 16.7917 10.9814 17.1352 10.5309C17.6329 9.87822 18.529 9.64852 19.2519 9.98837Z" />
                    </svg>
                    Создать новый модуль
                </a>
            </div>

            <div class="module-list pt-3 pb-2 mb-3">
                <div class="module-card d-flex justify-content-between align-items-center flex-wrap">
                    <div class="module-title mb-2 mb-md-0">
                        <a class="module-name-link" href="module.html">
                            Учебный модуль 1
                        </a>
                    </div>
                    <div class="module-info d-flex align-items-center mb-2 mb-md-0 me-md-3">
                        <span class="me-3">Карточек: 15</span>
                        <div class="progress me-2" style="width: 100px;">
                            <div class="progress-bar" role="progressbar" style="width: 30%;" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <span>30%</span>
                    </div>
                    <div class="dropdown module-actions">
                        <button class="btn btn-menu" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton1">
                            <li><a class="dropdown-item" href="#"><i class="fas fa-share-alt me-2"></i> Поделиться</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-edit me-2"></i> Редактировать</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash-alt me-2"></i> Удалить</a></li>
                        </ul>
                    </div>
                </div>
                <div class="module-card d-flex justify-content-between align-items-center flex-wrap">
                    <div class="module-title mb-2 mb-md-0">
                        <a class="module-name-link" href="module.html">
                            Модуль по Истории
                        </a>
                    </div>
                    <div class="module-info d-flex align-items-center mb-2 mb-md-0 me-md-3">
                        <span class="me-3">Карточек: 50</span>
                        <div class="progress me-2" style="width: 100px;">
                            <div class="progress-bar" role="progressbar" style="width: 75%;" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <span>75%</span>
                    </div>
                    <div class="dropdown module-actions">
                        <button class="btn btn-menu" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton2">
                             <li><a class="dropdown-item" href="#"><i class="fas fa-share-alt me-2"></i> Поделиться</a></li>
                            <li><a class="dropdown-item" href="#"><i class="fas fa-edit me-2"></i> Редактировать</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#"><i class="fas fa-trash-alt me-2"></i> Удалить</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<!-- Модальное окно -->
<div class="modal fade" id="createModuleModal" tabindex="-1" aria-labelledby="createModuleLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <form id="moduleForm">
          <div class="modal-header">
            <h5 class="modal-title" id="createModuleLabel">Новый модуль</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            <input type="text" class="form-control mb-3" id="moduleName" placeholder="Название модуля" required>
            <input type="number" class="form-control mb-3" id="cardCount" placeholder="Количество карточек" required>
          </div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-success">Добавить</button>
          </div>
        </form>
      </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
<script>
    const helpPage = "./help/sozdanie_novogo_uchebnogo_modulya.htm"; 
    
    // Дополнительный JavaScript для улучшения мобильного опыта
    document.addEventListener('DOMContentLoaded', function() {
        // Закрытие меню при клике на ссылку в мобильном режиме
        const navLinks = document.querySelectorAll('#sidebarMenu .nav-link');
        const menuToggles = document.querySelectorAll('.navbar-toggler');
        const bsCollapse = new bootstrap.Collapse(document.getElementById('sidebarMenu'), {toggle: false});
        
        // Обработка кликов по ссылкам в меню
        navLinks.forEach(function(link) {
            link.addEventListener('click', function() {
                if (window.innerWidth < 768) {
                    bsCollapse.hide();
                }
            });
        });
        
        // Обработка кликов по бургер-кнопкам
        menuToggles.forEach(function(toggle) {
            toggle.addEventListener('click', function(e) {
                // Предотвращаем двойное срабатывание для внутренней кнопки
                if (this.closest('#sidebarMenu')) {
                    e.stopPropagation();
                }
            });
        });
        
        // Адаптация прогресс-бара для мобильных устройств
        function adjustProgressBarWidth() {
            const progressContainers = document.querySelectorAll('.module-info .progress');
            if (window.innerWidth < 768) {
                progressContainers.forEach(container => {
                    container.style.width = '60%';
                });
            } else {
                progressContainers.forEach(container => {
                    container.style.width = '100px';
                });
            }
        }
        
        // Вызываем функцию при загрузке и изменении размера окна
        adjustProgressBarWidth();
        window.addEventListener('resize', adjustProgressBarWidth);
    });
</script>
<script src="help.js"></script>
</body>
</html>
